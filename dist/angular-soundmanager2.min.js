/*! angular-soundmanager2 11-11-2016 */
!function(a,b){"use strict";function c(c,d){function e(a){return ra.preferFlash&&ja&&!ra.ignoreFlash&&ra.flash[a]!==b&&ra.flash[a]}function f(a){return function(b){var c,d=this._s;return d&&d._a?c=a.call(this,b):(d&&d.id?ra._wD(d.id+": Ignoring "+b.type):ra._wD(wa+"Ignoring "+b.type),c=null),c}}this.setupOptions={url:c||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,forceUseGlobalHTML5Audio:!1,ignoreMobileRestrictions:!1,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onerror:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,playbackRate:1,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={onfailure:null,isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=d||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20150601+DEV",this.version=null,this.movieURL=null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra=this,sa=null,ta=null,ua="soundManager",va=ua+": ",wa="HTML5::",xa=navigator.userAgent,ya=a.location.href.toString(),za=document,Aa=[],Ba=!0,Ca=!1,Da=!1,Ea=!1,Fa=!1,Ga=!1,Ha=0,Ia=["log","info","warn","error"],Ja=8,Ka=null,La=null,Ma=!1,Na=!1,Oa=0,Pa=null,Qa=[],Ra=null,Sa=Array.prototype.slice,Ta=!1,Ua=0,Va=1e3,Wa=xa.match(/(ipad|iphone|ipod)/i),Xa=xa.match(/android/i),Ya=xa.match(/msie/i),Za=xa.match(/webkit/i),$a=xa.match(/safari/i)&&!xa.match(/chrome/i),_a=xa.match(/opera/i),ab=xa.match(/(mobile|pre\/|xoom)/i)||Wa||Xa,bb=!ya.match(/usehtml5audio/i)&&!ya.match(/sm2\-ignorebadua/i)&&$a&&!xa.match(/silk/i)&&xa.match(/OS X 10_6_([3-7])/i),cb=a.console!==b&&console.log!==b,db=za.hasFocus!==b?za.hasFocus():null,eb=$a&&(za.hasFocus===b||!za.hasFocus()),fb=!eb,gb=/(mp3|mp4|mpa|m4a|m4b)/i,hb="about:blank",ib="data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==",jb=za.location?za.location.protocol.match(/http/i):null,kb=jb?"":"http://",lb=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,mb=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],nb=new RegExp("\\.("+mb.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!jb,Q={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},ca=[null,"MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"],this.hasHTML5=function(){try{return Audio!==b&&(_a&&opera!==b&&opera.version()<10?new Audio(null):new Audio).canPlayType!==b}catch(a){return!1}}(),this.setup=function(a){var c=!ra.url;return a!==b&&Ea&&Ra&&ra.ok()&&(a.flashVersion!==b||a.url!==b||a.html5Test!==b)&&U(N("setupLate")),q(a),Ta||(ab?ra.setupOptions.ignoreMobileRestrictions&&!ra.setupOptions.forceUseGlobalHTML5Audio||(Qa.push(A.globalHTML5),Ta=!0):ra.setupOptions.forceUseGlobalHTML5Audio&&(Qa.push(A.globalHTML5),Ta=!0)),!qa&&ab&&(ra.setupOptions.ignoreMobileRestrictions?Qa.push(A.ignoreMobile):(ra.setupOptions.useHTML5Audio&&!ra.setupOptions.preferFlash||ra._wD(A.mobileUA),ra.setupOptions.useHTML5Audio=!0,ra.setupOptions.preferFlash=!1,Wa?ra.ignoreFlash=!0:(Xa&&!xa.match(/android\s2\.3/i)||!Xa)&&(ra._wD(A.globalHTML5),Ta=!0))),a&&(c&&E&&a.url!==b&&ra.beginDelayedInit(),E||a.url===b||"complete"!==za.readyState||setTimeout(C,1)),qa=!0,ra},this.ok=function(){return Ra?Ea&&!Fa:ra.useHTML5Audio&&ra.hasHTML5},this.supported=this.ok,this.getMovie=function(b){return h(b)||za[b]||a[b]},this.createSound=function(a,c){function d(){return h=S(h),ra.sounds[h.id]=new g(h),ra.soundIDs.push(h.id),ra.sounds[h.id]}var e,f,h,i=null;if(e=ua+".createSound(): ",f=e+N(Ea?"notOK":"notReady"),!Ea||!ra.ok())return U(f),!1;if(c!==b&&(a={id:a,url:c}),h=p(a),h.url=Z(h.url),h.id===b&&(h.id=ra.setupOptions.idPrefix+Ua++),h.id.toString().charAt(0).match(/^[0-9]$/)&&ra._wD(e+N("badID",h.id),2),ra._wD(e+h.id+(h.url?" ("+h.url+")":""),1),V(h.id,!0))return ra._wD(e+h.id+" exists",1),ra.sounds[h.id];if(aa(h))i=d(),ra.html5Only||ra._wD(h.id+": Using HTML5"),i._setup_html5(h);else{if(ra.html5Only)return ra._wD(h.id+": No HTML5 support for this sound, and no Flash. Exiting."),d();if(ra.html5.usingFlash&&h.url&&h.url.match(/data\:/i))return ra._wD(h.id+": data: URIs not supported via Flash. Exiting."),d();l>8&&(null===h.isMovieStar&&(h.isMovieStar=!!(h.serverURL||!!h.type&&h.type.match(lb)||h.url&&h.url.match(nb))),h.isMovieStar&&(ra._wD(e+"using MovieStar handling"),h.loops>1&&n("noNSLoop"))),h=T(h,e),i=d(),8===l?ta._createSound(h.id,h.loops||1,h.usePolicyFile):(ta._createSound(h.id,h.url,h.usePeakData,h.useWaveformData,h.useEQData,h.isMovieStar,!!h.isMovieStar&&h.bufferTime,h.loops||1,h.serverURL,h.duration||null,h.autoPlay,!0,h.autoLoad,h.usePolicyFile),h.serverURL||(i.connected=!0,h.onconnect&&h.onconnect.apply(i))),h.serverURL||!h.autoLoad&&!h.autoPlay||i.load(h)}return!h.serverURL&&h.autoPlay&&i.play(),i},this.destroySound=function(a,b){if(!V(a))return!1;var c,d=ra.sounds[a];for(d.stop(),d._iO={},d.unload(),c=0;c<ra.soundIDs.length;c++)if(ra.soundIDs[c]===a){ra.soundIDs.splice(c,1);break}return b||d.destruct(!0),d=null,delete ra.sounds[a],!0},this.load=function(a,b){return!!V(a)&&ra.sounds[a].load(b)},this.unload=function(a){return!!V(a)&&ra.sounds[a].unload()},this.onPosition=function(a,b,c,d){return!!V(a)&&ra.sounds[a].onposition(b,c,d)},this.onposition=this.onPosition,this.clearOnPosition=function(a,b,c){return!!V(a)&&ra.sounds[a].clearOnPosition(b,c)},this.play=function(a,b){var c=null,d=b&&!(b instanceof Object);if(!Ea||!ra.ok())return U(ua+".play(): "+N(Ea?"notOK":"notReady")),!1;if(V(a,d))d&&(b={url:b});else{if(!d)return!1;d&&(b={url:b}),b&&b.url&&(ra._wD(ua+'.play(): Attempting to create "'+a+'"',1),b.id=a,c=ra.createSound(b).play())}return null===c&&(c=ra.sounds[a].play(b)),c},this.start=this.play,this.setPlaybackRate=function(a,b,c){return!!V(a)&&ra.sounds[a].setPlaybackRate(b,c)},this.setPosition=function(a,b){return!!V(a)&&ra.sounds[a].setPosition(b)},this.stop=function(a){return!!V(a)&&(ra._wD(ua+".stop("+a+")",1),ra.sounds[a].stop())},this.stopAll=function(){var a;ra._wD(ua+".stopAll()",1);for(a in ra.sounds)ra.sounds.hasOwnProperty(a)&&ra.sounds[a].stop()},this.pause=function(a){return!!V(a)&&ra.sounds[a].pause()},this.pauseAll=function(){var a;for(a=ra.soundIDs.length-1;a>=0;a--)ra.sounds[ra.soundIDs[a]].pause()},this.resume=function(a){return!!V(a)&&ra.sounds[a].resume()},this.resumeAll=function(){var a;for(a=ra.soundIDs.length-1;a>=0;a--)ra.sounds[ra.soundIDs[a]].resume()},this.togglePause=function(a){return!!V(a)&&ra.sounds[a].togglePause()},this.setPan=function(a,b){return!!V(a)&&ra.sounds[a].setPan(b)},this.setVolume=function(a,c){var d,e;{if(a===b||isNaN(a)||c!==b)return!!V(a)&&ra.sounds[a].setVolume(c);for(d=0,e=ra.soundIDs.length;d<e;d++)ra.sounds[ra.soundIDs[d]].setVolume(a)}},this.mute=function(a){var b=0;if(a instanceof String&&(a=null),a)return!!V(a)&&(ra._wD(ua+'.mute(): Muting "'+a+'"'),ra.sounds[a].mute());for(ra._wD(ua+".mute(): Muting all sounds"),b=ra.soundIDs.length-1;b>=0;b--)ra.sounds[ra.soundIDs[b]].mute();return ra.muted=!0,!0},this.muteAll=function(){ra.mute()},this.unmute=function(a){var b;if(a instanceof String&&(a=null),a)return!!V(a)&&(ra._wD(ua+'.unmute(): Unmuting "'+a+'"'),ra.sounds[a].unmute());for(ra._wD(ua+".unmute(): Unmuting all sounds"),b=ra.soundIDs.length-1;b>=0;b--)ra.sounds[ra.soundIDs[b]].unmute();return ra.muted=!1,!0},this.unmuteAll=function(){ra.unmute()},this.toggleMute=function(a){return!!V(a)&&ra.sounds[a].toggleMute()},this.getMemoryUse=function(){var a=0;return ta&&8!==l&&(a=parseInt(ta._getMemoryUse(),10)),a},this.disable=function(c){var d;if(c===b&&(c=!1),Fa)return!1;for(Fa=!0,n("shutdown",1),d=ra.soundIDs.length-1;d>=0;d--)K(ra.sounds[ra.soundIDs[d]]);return K(ra),o(c),ha.remove(a,"load",u),!0},this.canPlayMIME=function(a){var b;return ra.hasHTML5&&(b=ba({type:a})),!b&&Ra&&(b=a&&ra.ok()?!!((l>8?a.match(lb):null)||a.match(ra.mimePattern)):null),b},this.canPlayURL=function(a){var b;return ra.hasHTML5&&(b=ba({url:a})),!b&&Ra&&(b=a&&ra.ok()?!!a.match(ra.filePattern):null),b},this.canPlayLink=function(a){return!(a.type===b||!a.type||!ra.canPlayMIME(a.type))||ra.canPlayURL(a.href)},this.getSoundById=function(a,b){if(!a)return null;var c=ra.sounds[a];return c||b||ra._wD(ua+'.getSoundById(): Sound "'+a+'" not found.',2),c},this.onready=function(b,c){var d="onready",e=!1;if("function"!=typeof b)throw N("needFunction",d);return Ea&&ra._wD(N("queue",d)),c||(c=a),s(d,b,c),t(),e=!0,e},this.ontimeout=function(b,c){var d="ontimeout",e=!1;if("function"!=typeof b)throw N("needFunction",d);return Ea&&ra._wD(N("queue",d)),c||(c=a),s(d,b,c),t({type:d}),e=!0,e},this._writeDebug=function(a,c){var d,e,f="soundmanager-debug";return!!ra.setupOptions.debugMode&&(!!(cb&&ra.useConsole&&(c&&"object"==typeof c?console.log(a,c):Ia[c]!==b?console[Ia[c]](a):console.log(a),ra.consoleOnly))||!!(d=h(f))&&(e=za.createElement("div"),++Ha%2===0&&(e.className="sm2-alt"),c=c===b?0:parseInt(c,10),e.appendChild(za.createTextNode(a)),c&&(c>=2&&(e.style.fontWeight="bold"),3===c&&(e.style.color="#ff3333")),d.insertBefore(e,d.firstChild),d=null,!0))},ya.indexOf("sm2-debug=alert")!==-1&&(this._writeDebug=function(b){a.alert(b)}),this._wD=this._writeDebug,this._debug=function(){var a,b;for(n("currentObj",1),a=0,b=ra.soundIDs.length;a<b;a++)ra.sounds[ra.soundIDs[a]]._debug()},this.reboot=function(b,c){ra.soundIDs.length&&ra._wD("Destroying "+ra.soundIDs.length+" SMSound object"+(1!==ra.soundIDs.length?"s":"")+"...");var d,e,f;for(d=ra.soundIDs.length-1;d>=0;d--)ra.sounds[ra.soundIDs[d]].destruct();if(ta)try{Ya&&(La=ta.innerHTML),Ka=ta.parentNode.removeChild(ta)}catch(a){n("badRemove",2)}if(La=Ka=Ra=ta=null,ra.enabled=E=Ea=Ma=Na=Ca=Da=Fa=Ta=ra.swfLoaded=!1,ra.soundIDs=[],ra.sounds={},Ua=0,qa=!1,b)Aa=[];else for(d in Aa)if(Aa.hasOwnProperty(d))for(e=0,f=Aa[d].length;e<f;e++)Aa[d][e].fired=!1;return c||ra._wD(ua+": Rebooting..."),ra.html5={usingFlash:null},ra.flash={},ra.html5Only=!1,ra.ignoreFlash=!1,a.setTimeout(function(){c||ra.beginDelayedInit()},20),ra},this.reset=function(){return n("reset"),ra.reboot(!0,!0)},this.getMoviePercent=function(){return ta&&"PercentLoaded"in ta?ta.PercentLoaded():null},this.beginDelayedInit=function(){Ga=!0,C(),setTimeout(function(){return!Na&&(G(),B(),Na=!0,!0)},20),v()},this.destruct=function(){ra._wD(ua+".destruct()"),ra.disable(!0)},g=function(a){var c,d,e,f,g,h,i,j,k,o,q=this,r=!1,s=[],t=0,u=null;k={duration:null,time:null},this.id=a.id,this.sID=this.id,this.url=a.url,this.options=p(a),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,o=!this.url,this.id3={},this._debug=function(){ra._wD(q.id+": Merged options:",q.options)},this.load=function(a){var c,d=null;if(a!==b?q._iO=p(a,q.options):(a=q.options,q._iO=a,u&&u!==q.url&&(n("manURL"),q._iO.url=q.url,q.url=null)),q._iO.url||(q._iO.url=q.url),q._iO.url=Z(q._iO.url),q.instanceOptions=q._iO,c=q._iO,ra._wD(q.id+": load ("+c.url+")"),!c.url&&!q.url)return ra._wD(q.id+": load(): url is unassigned. Exiting.",2),q;if(q.isHTML5||8!==l||q.url||c.autoPlay||ra._wD(q.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1),c.url===q.url&&0!==q.readyState&&2!==q.readyState)return n("onURL",1),3===q.readyState&&c.onload&&pa(q,function(){c.onload.apply(q,[!!q.duration])}),q;if(q.loaded=!1,q.readyState=1,q.playState=0,q.id3={},aa(c))d=q._setup_html5(c),d._called_load?ra._wD(q.id+": Ignoring request to load again"):(q._html5_canplay=!1,q.url!==c.url&&(ra._wD(n("manURL")+": "+c.url),q._a.src=c.url,q.setPosition(0)),q._a.autobuffer="auto",q._a.preload="auto",q._a._called_load=!0);else{if(ra.html5Only)return ra._wD(q.id+": No flash support. Exiting."),q;if(q._iO.url&&q._iO.url.match(/data\:/i))return ra._wD(q.id+": data: URIs not supported via Flash. Exiting."),q;try{q.isHTML5=!1,q._iO=T(S(c)),q._iO.autoPlay&&(q._iO.position||q._iO.from)&&(ra._wD(q.id+": Disabling autoPlay because of non-zero offset case"),q._iO.autoPlay=!1),c=q._iO,8===l?ta._load(q.id,c.url,c.stream,c.autoPlay,c.usePolicyFile):ta._load(q.id,c.url,!!c.stream,!!c.autoPlay,c.loops||1,!!c.autoLoad,c.usePolicyFile)}catch(a){n("smError",2),m("onload",!1),H({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return q.url=c.url,q},this.unload=function(){return 0!==q.readyState&&(ra._wD(q.id+": unload()"),q.isHTML5?(f(),q._a&&(q._a.pause(),u=ea(q._a))):8===l?ta._unload(q.id,hb):ta._unload(q.id),c()),q},this.destruct=function(a){ra._wD(q.id+": Destruct"),q.isHTML5?(f(),q._a&&(q._a.pause(),ea(q._a),Ta||e(),q._a._s=null,q._a=null)):(q._iO.onfailure=null,ta._destroySound(q.id)),a||ra.destroySound(q.id,!0)},this.play=function(a,c){var d,e,f,i,k,m,n,s=!0,t=null;if(d=q.id+": play(): ",c=c===b||c,a||(a={}),q.url&&(q._iO.url=q.url),q._iO=p(q._iO,q.options),q._iO=p(a,q._iO),q._iO.url=Z(q._iO.url),q.instanceOptions=q._iO,!q.isHTML5&&q._iO.serverURL&&!q.connected)return q.getAutoPlay()||(ra._wD(d+" Netstream not connected yet - setting autoPlay"),q.setAutoPlay(!0)),q;if(aa(q._iO)&&(q._setup_html5(q._iO),g()),1!==q.playState||q.paused||(e=q._iO.multiShot,e?ra._wD(d+"Already playing (multi-shot)",1):(ra._wD(d+"Already playing (one-shot)",1),q.isHTML5&&q.setPosition(q._iO.position),t=q)),null!==t)return t;if(a.url&&a.url!==q.url&&(q.readyState||q.isHTML5||8!==l||!o?q.load(q._iO):o=!1),q.loaded?ra._wD(d.substr(0,d.lastIndexOf(":"))):0===q.readyState?(ra._wD(d+"Attempting to load"),q.isHTML5||ra.html5Only?q.isHTML5?q.load(q._iO):(ra._wD(d+"Unsupported type. Exiting."),t=q):(q._iO.autoPlay=!0,q.load(q._iO)),q.instanceOptions=q._iO):2===q.readyState?(ra._wD(d+"Could not load - exiting",2),t=q):ra._wD(d+"Loading - attempting to play..."),null!==t)return t;if(!q.isHTML5&&9===l&&q.position>0&&q.position===q.duration&&(ra._wD(d+"Sound at end, resetting to position: 0"),a.position=0),q.paused&&q.position>=0&&(!q._iO.serverURL||q.position>0))ra._wD(d+"Resuming from paused state",1),q.resume();else{if(q._iO=p(a,q._iO),(!q.isHTML5&&null!==q._iO.position&&q._iO.position>0||null!==q._iO.from&&q._iO.from>0||null!==q._iO.to)&&0===q.instanceCount&&0===q.playState&&!q._iO.serverURL){if(i=function(){q._iO=p(a,q._iO),q.play(q._iO)},q.isHTML5&&!q._html5_canplay?(ra._wD(d+"Beginning load for non-zero offset case"),q.load({_oncanplay:i}),t=!1):q.isHTML5||q.loaded||q.readyState&&2===q.readyState||(ra._wD(d+"Preloading for non-zero offset case"),q.load({onload:i}),t=!1),null!==t)return t;q._iO=j()}(!q.instanceCount||q._iO.multiShotEvents||q.isHTML5&&q._iO.multiShot&&!Ta||!q.isHTML5&&l>8&&!q.getAutoPlay())&&q.instanceCount++,q._iO.onposition&&0===q.playState&&h(q),q.playState=1,q.paused=!1,q.position=q._iO.position===b||isNaN(q._iO.position)?0:q._iO.position,q.isHTML5||(q._iO=T(S(q._iO))),q._iO.onplay&&c&&(q._iO.onplay.apply(q),r=!0),q.setVolume(q._iO.volume,!0),q.setPan(q._iO.pan,!0),1!==q._iO.playbackRate&&q.setPlaybackRate(q._iO.playbackRate),q.isHTML5?q.instanceCount<2?(g(),f=q._setup_html5(),q.setPosition(q._iO.position),f.play()):(ra._wD(q.id+": Cloning Audio() for instance #"+q.instanceCount+"..."),k=new Audio(q._iO.url),m=function(){ha.remove(k,"ended",m),q._onfinish(q),ea(k),k=null},n=function(){ha.remove(k,"canplay",n);try{k.currentTime=q._iO.position/Va}catch(a){U(q.id+": multiShot play() failed to apply position of "+q._iO.position/Va)}k.play()},ha.add(k,"ended",m),q._iO.volume!==b&&(k.volume=Math.max(0,Math.min(1,q._iO.volume/100))),q.muted&&(k.muted=!0),q._iO.position?ha.add(k,"canplay",n):k.play()):(s=ta._start(q.id,q._iO.loops||1,9===l?q.position:q.position/Va,q._iO.multiShot||!1),9!==l||s||(ra._wD(d+"No sound hardware, or 32-sound ceiling hit",2),q._iO.onplayerror&&q._iO.onplayerror.apply(q)))}return q},this.start=this.play,this.stop=function(a){var b,c=q._iO;return 1===q.playState&&(ra._wD(q.id+": stop()"),q._onbufferchange(0),q._resetOnPosition(0),q.paused=!1,q.isHTML5||(q.playState=0),i(),c.to&&q.clearOnPosition(c.to),q.isHTML5?q._a&&(b=q.position,q.setPosition(0),q.position=b,q._a.pause(),q.playState=0,q._onTimer(),f()):(ta._stop(q.id,a),c.serverURL&&q.unload()),q.instanceCount=0,q._iO={},c.onstop&&c.onstop.apply(q)),q},this.setAutoPlay=function(a){ra._wD(q.id+": Autoplay turned "+(a?"on":"off")),q._iO.autoPlay=a,q.isHTML5||(ta._setAutoPlay(q.id,a),a&&(q.instanceCount||1!==q.readyState||(q.instanceCount++,ra._wD(q.id+": Incremented instance count to "+q.instanceCount))))},this.getAutoPlay=function(){return q._iO.autoPlay},this.setPlaybackRate=function(a){var b=Math.max(.5,Math.min(4,a));if(b!==a&&ra._wD(q.id+": setPlaybackRate("+a+"): limiting rate to "+b,2),q.isHTML5)try{q._iO.playbackRate=b,q._a.playbackRate=b}catch(a){ra._wD(q.id+": setPlaybackRate("+b+") failed: "+a.message,2)}return q},this.setPosition=function(a){a===b&&(a=0);var c,d,e=q.isHTML5?Math.max(a,0):Math.min(q.duration||q._iO.duration,Math.max(a,0));if(q.position=e,d=q.position/Va,q._resetOnPosition(q.position),q._iO.position=e,q.isHTML5){if(q._a){if(q._html5_canplay){if(q._a.currentTime.toFixed(3)!==d.toFixed(3)){ra._wD(q.id+": setPosition("+d+")");try{q._a.currentTime=d,(0===q.playState||q.paused)&&q._a.pause()}catch(a){ra._wD(q.id+": setPosition("+d+") failed: "+a.message,2)}}}else if(d)return ra._wD(q.id+": setPosition("+d+"): Cannot seek yet, sound not ready",2),q;q.paused&&q._onTimer(!0)}}else c=9===l?q.position:d,q.readyState&&2!==q.readyState&&ta._setPosition(q.id,c,q.paused||!q.playState,q._iO.multiShot);return q},this.pause=function(a){return q.paused||0===q.playState&&1!==q.readyState?q:(ra._wD(q.id+": pause()"),q.paused=!0,q.isHTML5?(q._setup_html5().pause(),f()):(a||a===b)&&ta._pause(q.id,q._iO.multiShot),q._iO.onpause&&q._iO.onpause.apply(q),q)},this.resume=function(){var a=q._iO;return q.paused?(ra._wD(q.id+": resume()"),q.paused=!1,q.playState=1,q.isHTML5?(q._setup_html5().play(),g()):(a.isMovieStar&&!a.serverURL&&q.setPosition(q.position),ta._pause(q.id,a.multiShot)),!r&&a.onplay?(a.onplay.apply(q),r=!0):a.onresume&&a.onresume.apply(q),q):q},this.togglePause=function(){return ra._wD(q.id+": togglePause()"),0===q.playState?(q.play({position:9!==l||q.isHTML5?q.position/Va:q.position}),q):(q.paused?q.resume():q.pause(),q)},this.setPan=function(a,c){return a===b&&(a=0),c===b&&(c=!1),q.isHTML5||ta._setPan(q.id,a),q._iO.pan=a,c||(q.pan=a,q.options.pan=a),q},this.setVolume=function(a,c){return a===b&&(a=100),c===b&&(c=!1),q.isHTML5?q._a&&(ra.muted&&!q.muted&&(q.muted=!0,q._a.muted=!0),q._a.volume=Math.max(0,Math.min(1,a/100))):ta._setVolume(q.id,ra.muted&&!q.muted||q.muted?0:a),q._iO.volume=a,c||(q.volume=a,q.options.volume=a),q},this.mute=function(){return q.muted=!0,q.isHTML5?q._a&&(q._a.muted=!0):ta._setVolume(q.id,0),q},this.unmute=function(){q.muted=!1;var a=q._iO.volume!==b;return q.isHTML5?q._a&&(q._a.muted=!1):ta._setVolume(q.id,a?q._iO.volume:q.options.volume),q},this.toggleMute=function(){return q.muted?q.unmute():q.mute()},this.onPosition=function(a,c,d){return s.push({position:parseInt(a,10),method:c,scope:d!==b?d:q,fired:!1}),q},this.onposition=this.onPosition,this.clearOnPosition=function(a,b){var c;if(a=parseInt(a,10),isNaN(a))return!1;for(c=0;c<s.length;c++)a===s[c].position&&(b&&b!==s[c].method||(s[c].fired&&t--,s.splice(c,1)))},this._processOnPosition=function(){var a,b,c=s.length;if(!c||!q.playState||t>=c)return!1;for(a=c-1;a>=0;a--)b=s[a],!b.fired&&q.position>=b.position&&(b.fired=!0,t++,b.method.apply(b.scope,[b.position]),c=s.length);return!0},this._resetOnPosition=function(a){var b,c,d=s.length;if(!d)return!1;for(b=d-1;b>=0;b--)c=s[b],c.fired&&a<=c.position&&(c.fired=!1,t--);return!0},j=function(){var a,b,c=q._iO,d=c.from,e=c.to;return b=function(){ra._wD(q.id+': "To" time of '+e+" reached."),q.clearOnPosition(e,b),q.stop()},a=function(){ra._wD(q.id+': Playing "from" '+d),null===e||isNaN(e)||q.onPosition(e,b)},null===d||isNaN(d)||(c.position=d,c.multiShot=!1,a()),c},h=function(){var a,b=q._iO.onposition;if(b)for(a in b)b.hasOwnProperty(a)&&q.onPosition(parseInt(a,10),b[a])},i=function(){var a,b=q._iO.onposition;if(b)for(a in b)b.hasOwnProperty(a)&&q.clearOnPosition(parseInt(a,10))},g=function(){q.isHTML5&&W(q)},f=function(){q.isHTML5&&X(q)},c=function(a){a||(s=[],t=0),r=!1,q._hasTimer=null,q._a=null,q._html5_canplay=!1,q.bytesLoaded=null,q.bytesTotal=null,q.duration=q._iO&&q._iO.duration?q._iO.duration:null,q.durationEstimate=null,q.buffered=[],q.eqData=[],q.eqData.left=[],q.eqData.right=[],q.failures=0,q.isBuffering=!1,q.instanceOptions={},q.instanceCount=0,q.loaded=!1,q.metadata={},q.readyState=0,q.muted=!1,q.paused=!1,q.peakData={left:0,right:0},q.waveformData={left:[],right:[]},q.playState=0,q.position=null,q.id3={}},c(),this._onTimer=function(a){var b,c,d=!1,e={};if(q._hasTimer||a)return q._a&&(a||(q.playState>0||1===q.readyState)&&!q.paused)&&(b=q._get_html5_duration(),b!==k.duration&&(k.duration=b,q.duration=b,d=!0),q.durationEstimate=q.duration,c=q._a.currentTime*Va||0,c!==k.time&&(k.time=c,d=!0),(d||a)&&q._whileplaying(c,e,e,e,e)),d},this._get_html5_duration=function(){var a=q._iO,b=q._a&&q._a.duration?q._a.duration*Va:a&&a.duration?a.duration:null,c=b&&!isNaN(b)&&b!==1/0?b:null;return c},this._apply_loop=function(a,b){!a.loop&&b>1&&ra._wD("Note: Native HTML5 looping is infinite.",1),a.loop=b>1?"loop":""},this._setup_html5=function(a){var b,e=p(q._iO,a),f=Ta?sa:q._a,g=decodeURI(e.url);if(Ta?g===decodeURI(ia)&&(b=!0):g===decodeURI(u)&&(b=!0),f){if(f._s)if(Ta)f._s&&f._s.playState&&!b&&f._s.stop();else if(!Ta&&g===decodeURI(u))return q._apply_loop(f,e.loops),f;b||(u&&c(!1),f.src=e.url,q.url=e.url,u=e.url,ia=e.url,f._called_load=!1)}else e.autoLoad||e.autoPlay?(q._a=new Audio(e.url),q._a.load()):q._a=_a&&opera.version()<10?new Audio(null):new Audio,f=q._a,f._called_load=!1,Ta&&(sa=f);return q.isHTML5=!0,q._a=f,f._s=q,d(),q._apply_loop(f,e.loops),e.autoLoad||e.autoPlay?q.load():(f.autobuffer=!1,f.preload="auto"),f},d=function(){function a(a,b,c){return q._a?q._a.addEventListener(a,b,c||!1):null}if(q._a._added_events)return!1;var b;q._a._added_events=!0;for(b in ma)ma.hasOwnProperty(b)&&a(b,ma[b]);return!0},e=function(){function a(a,b,c){return q._a?q._a.removeEventListener(a,b,c||!1):null}var b;ra._wD(q.id+": Removing event listeners"),q._a._added_events=!1;for(b in ma)ma.hasOwnProperty(b)&&a(b,ma[b])},this._onload=function(a){var b,c=!!a||!q.isHTML5&&8===l&&q.duration;return b=q.id+": ",ra._wD(b+(c?"onload()":"Failed to load / invalid sound?"+(q.duration?" -":" Zero-length duration reported.")+" ("+q.url+")"),c?1:2),c||q.isHTML5||(ra.sandbox.noRemote===!0&&ra._wD(b+N("noNet"),1),ra.sandbox.noLocal===!0&&ra._wD(b+N("noLocal"),1)),q.loaded=c,q.readyState=c?3:2,q._onbufferchange(0),c||q.isHTML5||q._onerror(),q._iO.onload&&pa(q,function(){q._iO.onload.apply(q,[c])}),!0},this._onerror=function(a,b){q._iO.onerror&&pa(q,function(){q._iO.onerror.apply(q,[a,b])})},this._onbufferchange=function(a){return 0!==q.playState&&(!(a&&q.isBuffering||!a&&!q.isBuffering)&&(q.isBuffering=1===a,q._iO.onbufferchange&&(ra._wD(q.id+": Buffer state change: "+a),q._iO.onbufferchange.apply(q,[a])),!0))},this._onsuspend=function(){return q._iO.onsuspend&&(ra._wD(q.id+": Playback suspended"),q._iO.onsuspend.apply(q)),!0},this._onfailure=function(a,b,c){q.failures++,ra._wD(q.id+": Failure ("+q.failures+"): "+a),q._iO.onfailure&&1===q.failures?q._iO.onfailure(a,b,c):ra._wD(q.id+": Ignoring failure")},this._onwarning=function(a,b,c){q._iO.onwarning&&q._iO.onwarning(a,b,c)},this._onfinish=function(){var a=q._iO.onfinish;q._onbufferchange(0),q._resetOnPosition(0),q.instanceCount&&(q.instanceCount--,q.instanceCount||(i(),q.playState=0,q.paused=!1,q.instanceCount=0,q.instanceOptions={},q._iO={},f(),q.isHTML5&&(q.position=0)),q.instanceCount&&!q._iO.multiShotEvents||a&&(ra._wD(q.id+": onfinish()"),pa(q,function(){a.apply(q)})))},this._whileloading=function(a,b,c,d){var e=q._iO;q.bytesLoaded=a,q.bytesTotal=b,q.duration=Math.floor(c),q.bufferLength=d,q.isHTML5||e.isMovieStar?q.durationEstimate=q.duration:e.duration?q.durationEstimate=q.duration>e.duration?q.duration:e.duration:q.durationEstimate=parseInt(q.bytesTotal/q.bytesLoaded*q.duration,10),q.isHTML5||(q.buffered=[{start:0,end:q.duration}]),(3!==q.readyState||q.isHTML5)&&e.whileloading&&e.whileloading.apply(q)},this._whileplaying=function(a,c,d,e,f){var g,h=q._iO;return!isNaN(a)&&null!==a&&(q.position=Math.max(0,a),q._processOnPosition(),!q.isHTML5&&l>8&&(h.usePeakData&&c!==b&&c&&(q.peakData={left:c.leftPeak,right:c.rightPeak}),h.useWaveformData&&d!==b&&d&&(q.waveformData={left:d.split(","),right:e.split(",")}),h.useEQData&&f!==b&&f&&f.leftEQ&&(g=f.leftEQ.split(","),q.eqData=g,q.eqData.left=g,f.rightEQ!==b&&f.rightEQ&&(q.eqData.right=f.rightEQ.split(",")))),1===q.playState&&(q.isHTML5||8!==l||q.position||!q.isBuffering||q._onbufferchange(0),h.whileplaying&&h.whileplaying.apply(q)),!0)},this._oncaptiondata=function(a){ra._wD(q.id+": Caption data received."),q.captiondata=a,q._iO.oncaptiondata&&q._iO.oncaptiondata.apply(q,[a])},this._onmetadata=function(a,b){ra._wD(q.id+": Metadata received.");var c,d,e={};for(c=0,d=a.length;c<d;c++)e[a[c]]=b[c];q.metadata=e,q._iO.onmetadata&&q._iO.onmetadata.call(q,q.metadata)},this._onid3=function(a,b){ra._wD(q.id+": ID3 data received.");var c,d,e=[];for(c=0,d=a.length;c<d;c++)e[a[c]]=b[c];q.id3=p(q.id3,e),q._iO.onid3&&q._iO.onid3.apply(q)},this._onconnect=function(a){a=1===a,ra._wD(q.id+": "+(a?"Connected.":"Failed to connect? - "+q.url),a?1:2),q.connected=a,a&&(q.failures=0,V(q.id)&&(q.getAutoPlay()?q.play(b,q.getAutoPlay()):q._iO.autoLoad&&q.load()),q._iO.onconnect&&q._iO.onconnect.apply(q,[a]))},this._ondataerror=function(a){q.playState>0&&(ra._wD(q.id+": Data error: "+a),q._iO.ondataerror&&q._iO.ondataerror.apply(q))},this._debug()},F=function(){return za.body||za.getElementsByTagName("div")[0]},h=function(a){return za.getElementById(a)},p=function(a,c){var d,e,f=a||{};d=c===b?ra.defaultOptions:c;for(e in d)d.hasOwnProperty(e)&&f[e]===b&&("object"!=typeof d[e]||null===d[e]?f[e]=d[e]:f[e]=p(f[e],d[e]));return f},pa=function(b,c){b.isHTML5||8!==l?c():a.setTimeout(c,0)},r={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},q=function(a,c){var d,e=!0,f=c!==b,g=ra.setupOptions,h=r;if(a===b){e=[];for(d in g)g.hasOwnProperty(d)&&e.push(d);for(d in h)h.hasOwnProperty(d)&&("object"==typeof ra[d]?e.push(d+": {...}"):ra[d]instanceof Function?e.push(d+": function() {...}"):e.push(d));return ra._wD(N("setup",e.join(", "))),!1}for(d in a)if(a.hasOwnProperty(d))if("object"!=typeof a[d]||null===a[d]||a[d]instanceof Array||a[d]instanceof RegExp)f&&h[c]!==b?ra[c][d]=a[d]:g[d]!==b?(ra.setupOptions[d]=a[d],ra[d]=a[d]):h[d]===b?(U(N(ra[d]===b?"setupUndef":"setupError",d),2),e=!1):ra[d]instanceof Function?ra[d].apply(ra,a[d]instanceof Array?a[d]:[a[d]]):ra[d]=a[d];else{if(h[d]!==b)return q(a[d],d);U(N(ra[d]===b?"setupUndef":"setupError",d),2),e=!1}return e},ha=function(){function b(a){var b=Sa.call(a),c=b.length;return f?(b[1]="on"+b[1],c>3&&b.pop()):3===c&&b.push(!1),b}function c(a,b){var c=a.shift(),d=[g[b]];f?c[d](a[0],a[1]):c[d].apply(c,a)}function d(){c(b(arguments),"add")}function e(){c(b(arguments),"remove")}var f=a.attachEvent,g={add:f?"attachEvent":"addEventListener",remove:f?"detachEvent":"removeEventListener"};return{add:d,remove:e}}(),ma={abort:f(function(){ra._wD(this._s.id+": abort")}),canplay:f(function(){var a,c=this._s;if(c._html5_canplay)return!0;if(c._html5_canplay=!0,ra._wD(c.id+": canplay"),c._onbufferchange(0),a=c._iO.position===b||isNaN(c._iO.position)?null:c._iO.position/Va,this.currentTime!==a){ra._wD(c.id+": canplay: Setting position to "+a);try{this.currentTime=a}catch(b){ra._wD(c.id+": canplay: Setting position of "+a+" failed: "+b.message,2)}}c._iO._oncanplay&&c._iO._oncanplay()}),canplaythrough:f(function(){var a=this._s;a.loaded||(a._onbufferchange(0),a._whileloading(a.bytesLoaded,a.bytesTotal,a._get_html5_duration()),a._onload(!0))}),durationchange:f(function(){var a,b=this._s;a=b._get_html5_duration(),isNaN(a)||a===b.duration||(ra._wD(this._s.id+": durationchange ("+a+")"+(b.duration?", previously "+b.duration:"")),b.durationEstimate=b.duration=a)}),ended:f(function(){var a=this._s;ra._wD(a.id+": ended"),a._onfinish()}),error:f(function(){var a=ca[this.error.code]||null;ra._wD(this._s.id+": HTML5 error, code "+this.error.code+(a?" ("+a+")":"")),this._s._onload(!1),this._s._onerror(this.error.code,a)}),loadeddata:f(function(){var a=this._s;ra._wD(a.id+": loadeddata"),a._loaded||$a||(a.duration=a._get_html5_duration())}),loadedmetadata:f(function(){ra._wD(this._s.id+": loadedmetadata")}),loadstart:f(function(){ra._wD(this._s.id+": loadstart"),this._s._onbufferchange(1)}),play:f(function(){this._s._onbufferchange(0)}),playing:f(function(){ra._wD(this._s.id+": playing "+String.fromCharCode(9835)),this._s._onbufferchange(0)}),progress:f(function(a){var b,c,d,e=this._s,f=0,g="progress"===a.type,h=a.target.buffered,i=a.loaded||0,j=a.total||1;if(e.buffered=[],h&&h.length){for(b=0,c=h.length;b<c;b++)e.buffered.push({start:h.start(b)*Va,end:h.end(b)*Va});if(f=(h.end(0)-h.start(0))*Va,i=Math.min(1,f/(a.target.duration*Va)),g&&h.length>1){for(d=[],c=h.length,b=0;b<c;b++)d.push(a.target.buffered.start(b)*Va+"-"+a.target.buffered.end(b)*Va);ra._wD(this._s.id+": progress, timeRanges: "+d.join(", "))}g&&!isNaN(i)&&ra._wD(this._s.id+": progress, "+Math.floor(100*i)+"% loaded")}isNaN(i)||(e._whileloading(i,j,e._get_html5_duration()),i&&j&&i===j&&ma.canplaythrough.call(this,a))}),ratechange:f(function(){ra._wD(this._s.id+": ratechange")}),suspend:f(function(a){var b=this._s;ra._wD(this._s.id+": suspend"),ma.progress.call(this,a),b._onsuspend()}),stalled:f(function(){ra._wD(this._s.id+": stalled")}),timeupdate:f(function(){this._s._onTimer()}),waiting:f(function(){var a=this._s;ra._wD(this._s.id+": waiting"),a._onbufferchange(1)})},aa=function(a){var b;return b=!(!a||!(a.type||a.url||a.serverURL))&&(!(a.serverURL||a.type&&e(a.type))&&(a.type?ba({type:a.type}):ba({url:a.url})||ra.html5Only||a.url.match(/data\:/i)));
},ea=function(a){var c;return a&&(c=$a?hb:ra.html5.canPlayType("audio/wav")?ib:hb,a.src=c,a._called_unload!==b&&(a._called_load=!1)),Ta&&(ia=null),c},ba=function(a){if(!ra.useHTML5Audio||!ra.hasHTML5)return!1;var c,d,f,g,h=a.url||null,i=a.type||null,j=ra.audioFormats;if(i&&ra.html5[i]!==b)return ra.html5[i]&&!e(i);if(!da){da=[];for(g in j)j.hasOwnProperty(g)&&(da.push(g),j[g].related&&(da=da.concat(j[g].related)));da=new RegExp("\\.("+da.join("|")+")(\\?.*)?$","i")}return f=h?h.toLowerCase().match(da):null,f&&f.length?f=f[1]:i?(d=i.indexOf(";"),f=(d!==-1?i.substr(0,d):i).substr(6)):c=!1,f&&ra.html5[f]!==b?c=ra.html5[f]&&!e(f):(i="audio/"+f,c=ra.html5.canPlayType({type:i}),ra.html5[f]=c,c=c&&ra.html5[i]&&!e(i)),c},ga=function(){function a(a){var b,c,d=!1,e=!1;if(!g||"function"!=typeof g.canPlayType)return d;if(a instanceof Array){for(f=0,c=a.length;f<c;f++)(ra.html5[a[f]]||g.canPlayType(a[f]).match(ra.html5Test))&&(e=!0,ra.html5[a[f]]=!0,ra.flash[a[f]]=!!a[f].match(gb));d=e}else b=!(!g||"function"!=typeof g.canPlayType)&&g.canPlayType(a),d=!(!b||!b.match(ra.html5Test));return d}if(!ra.useHTML5Audio||!ra.hasHTML5)return ra.html5.usingFlash=!0,Ra=!0,!1;var c,d,e,f,g=Audio!==b?_a&&opera.version()<10?new Audio(null):new Audio:null,h={};e=ra.audioFormats;for(c in e)if(e.hasOwnProperty(c)&&(d="audio/"+c,h[c]=a(e[c].type),h[d]=h[c],c.match(gb)?(ra.flash[c]=!0,ra.flash[d]=!0):(ra.flash[c]=!1,ra.flash[d]=!1),e[c]&&e[c].related))for(f=e[c].related.length-1;f>=0;f--)h["audio/"+e[c].related[f]]=h[c],ra.html5[e[c].related[f]]=h[c],ra.flash[e[c].related[f]]=h[c];return h.canPlayType=g?a:null,ra.html5=p(ra.html5,h),ra.html5.usingFlash=_(),Ra=ra.html5.usingFlash,!0},A={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:ua+"exception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:va+"Verify that %s is a valid path.",tryDebug:"Try "+ua+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:va+"Non-HTTP page ("+za.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:va+"Special case: Waiting for SWF to load with window focus...",waitForever:va+"Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:va+"Waiting for 100% SWF load...",needFunction:va+"Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:va+"_debug(): Current sound objects",waitOnload:va+"Waiting for window.onload()",docLoaded:va+"Document already loaded",onload:va+"initComplete(): calling soundManager.onload()",onloadOK:ua+".onload() complete",didInit:va+"init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:va+"Failed to remove Flash node.",shutdown:ua+".disable(): Shutting down",queue:va+"Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+Q.swfTimedout+" CSS...",fbLoaded:"Flash loaded",fbHandler:va+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:ua+".load(): current URL already assigned.",badFV:ua+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:va+"Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:va+"Got window focus.",policy:"Enabling usePolicyFile for data access",setup:ua+".setup(): allowed parameters: %s",setupError:ua+'.setup(): "%s" cannot be assigned with this method.',setupUndef:ua+'.setup(): Could not find option "%s"',setupLate:ua+".setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:va+"Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready. "+String.fromCharCode(10003),reset:ua+".reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device.",ignoreMobile:"Ignoring mobile restrictions for this device."},N=function(){var a,b,c,d,e;if(a=Sa.call(arguments),d=a.shift(),e=A&&A[d]?A[d]:"",e&&a&&a.length)for(b=0,c=a.length;b<c;b++)e=e.replace("%s",a[b]);return e},S=function(a){return 8===l&&a.loops>1&&a.stream&&(n("as2loop"),a.stream=!1),a},T=function(a,b){return a&&!a.usePolicyFile&&(a.onid3||a.usePeakData||a.useWaveformData||a.useEQData)&&(ra._wD((b||"")+N("policy")),a.usePolicyFile=!0),a},U=function(a){cb&&console.warn!==b?console.warn(a):ra._wD(a)},i=function(){return!1},K=function(a){var b;for(b in a)a.hasOwnProperty(b)&&"function"==typeof a[b]&&(a[b]=i);b=null},L=function(a){a===b&&(a=!1),(Fa||a)&&ra.disable(a)},M=function(a){var b,c=null;if(a)if(a.match(/\.swf(\?.*)?$/i)){if(c=a.substr(a.toLowerCase().lastIndexOf(".swf?")+4))return a}else a.lastIndexOf("/")!==a.length-1&&(a+="/");return b=(a&&a.lastIndexOf("/")!==-1?a.substr(0,a.lastIndexOf("/")+1):"./")+ra.movieURL,ra.noSWFCache&&(b+="?ts="+(new Date).getTime()),b},y=function(){l=parseInt(ra.flashVersion,10),8!==l&&9!==l&&(ra._wD(N("badFV",l,Ja)),ra.flashVersion=l=Ja);var a=ra.debugMode||ra.debugFlash?"_debug.swf":".swf";ra.useHTML5Audio&&!ra.html5Only&&ra.audioFormats.mp4.required&&l<9&&(ra._wD(N("needfl9")),ra.flashVersion=l=9),ra.version=ra.versionNumber+(ra.html5Only?" (HTML5-only mode)":9===l?" (AS3/Flash 9)":" (AS2/Flash 8)"),l>8?(ra.defaultOptions=p(ra.defaultOptions,ra.flash9Options),ra.features.buffering=!0,ra.defaultOptions=p(ra.defaultOptions,ra.movieStarOptions),ra.filePatterns.flash9=new RegExp("\\.(mp3|"+mb.join("|")+")(\\?.*)?$","i"),ra.features.movieStar=!0):ra.features.movieStar=!1,ra.filePattern=ra.filePatterns[8!==l?"flash9":"flash8"],ra.movieURL=(8===l?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",a),ra.features.peakData=ra.features.waveformData=ra.features.eqData=l>8},I=function(a,b){return!!ta&&void ta._setPolling(a,b)},J=function(){if(ra.debugURLParam.test(ya)&&(ra.setupOptions.debugMode=ra.debugMode=!0),h(ra.debugID))return!1;var a,b,c,d,e;if(ra.debugMode&&!h(ra.debugID)&&(!cb||!ra.useConsole||!ra.consoleOnly)){a=za.createElement("div"),a.id=ra.debugID+"-toggle",d={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},a.appendChild(za.createTextNode("-")),a.onclick=R,a.title="Toggle SM2 debug console",xa.match(/msie 6/i)&&(a.style.position="absolute",a.style.cursor="hand");for(e in d)d.hasOwnProperty(e)&&(a.style[e]=d[e]);if(b=za.createElement("div"),b.id=ra.debugID,b.style.display=ra.debugMode?"block":"none",ra.debugMode&&!h(a.id)){try{c=F(),c.appendChild(a)}catch(a){throw new Error(N("domError")+" \n"+a.toString())}c.appendChild(b)}}c=null},V=this.getSoundById,n=function(a,b){return a?ra._wD(N(a),b):""},R=function(){var a=h(ra.debugID),b=h(ra.debugID+"-toggle");return!!a&&(Ba?(b.innerHTML="+",a.style.display="none"):(b.innerHTML="-",a.style.display="block"),void(Ba=!Ba))},m=function(c,d,e){if(a.sm2Debugger!==b)try{sm2Debugger.handleEvent(c,d,e)}catch(a){return!1}return!0},P=function(){var a=[];return ra.debugMode&&a.push(Q.sm2Debug),ra.debugFlash&&a.push(Q.flashDebug),ra.useHighPerformance&&a.push(Q.highPerf),a.join(" ")},O=function(){var a=N("fbHandler"),b=ra.getMoviePercent(),c=Q,d={type:"FLASHBLOCK"};return!ra.html5Only&&void(ra.ok()?(ra.didFlashBlock&&ra._wD(a+": Unblocked"),ra.oMC&&(ra.oMC.className=[P(),c.swfDefault,c.swfLoaded+(ra.didFlashBlock?" "+c.swfUnblocked:"")].join(" "))):(Ra&&(ra.oMC.className=P()+" "+c.swfDefault+" "+(null===b?c.swfTimedout:c.swfError),ra._wD(a+": "+N("fbTimeout")+(b?" ("+N("fbLoaded")+")":""))),ra.didFlashBlock=!0,t({type:"ontimeout",ignoreInit:!0,error:d}),H(d)))},s=function(a,c,d){Aa[a]===b&&(Aa[a]=[]),Aa[a].push({method:c,scope:d||null,fired:!1})},t=function(a){if(a||(a={type:ra.ok()?"onready":"ontimeout"}),!Ea&&a&&!a.ignoreInit)return!1;if("ontimeout"===a.type&&(ra.ok()||Fa&&!a.ignoreInit))return!1;var b,c,d={success:a&&a.ignoreInit?ra.ok():!Fa},e=a&&a.type?Aa[a.type]||[]:[],f=[],g=[d],h=Ra&&!ra.ok();for(a.error&&(g[0].error=a.error),b=0,c=e.length;b<c;b++)e[b].fired!==!0&&f.push(e[b]);if(f.length)for(b=0,c=f.length;b<c;b++)f[b].scope?f[b].method.apply(f[b].scope,g):f[b].method.apply(this,g),h||(f[b].fired=!0);return!0},u=function(){a.setTimeout(function(){ra.useFlashBlock&&O(),t(),"function"==typeof ra.onload&&(n("onload",1),ra.onload.apply(a),n("onloadOK",1)),ra.waitForWindowLoad&&ha.add(a,"load",u)},1)},ka=function(){if(ja!==b)return ja;var c,d,e,f=!1,g=navigator,h=g.plugins,i=a.ActiveXObject;if(h&&h.length)d="application/x-shockwave-flash",e=g.mimeTypes,e&&e[d]&&e[d].enabledPlugin&&e[d].enabledPlugin.description&&(f=!0);else if(i!==b&&!xa.match(/MSAppHost/i)){try{c=new i("ShockwaveFlash.ShockwaveFlash")}catch(a){c=null}f=!!c,c=null}return ja=f,f},_=function(){var a,b,c=ra.audioFormats,d=Wa&&!!xa.match(/os (1|2|3_0|3_1)\s/i);if(d?(ra.hasHTML5=!1,ra.html5Only=!0,ra.oMC&&(ra.oMC.style.display="none")):ra.useHTML5Audio&&(ra.html5&&ra.html5.canPlayType||(ra._wD("SoundManager: No HTML5 Audio() support detected."),ra.hasHTML5=!1),bb&&ra._wD(va+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(ja?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)),ra.useHTML5Audio&&ra.hasHTML5){$=!0;for(b in c)c.hasOwnProperty(b)&&c[b].required&&(ra.html5.canPlayType(c[b].type)?ra.preferFlash&&(ra.flash[b]||ra.flash[c[b].type])&&(a=!0):($=!1,a=!0))}return ra.ignoreFlash&&(a=!1,$=!0),ra.html5Only=ra.hasHTML5&&ra.useHTML5Audio&&!a,!ra.html5Only},Z=function(a){var b,c,d,e=0;if(a instanceof Array){for(b=0,c=a.length;b<c;b++)if(a[b]instanceof Object){if(ra.canPlayMIME(a[b].type)){e=b;break}}else if(ra.canPlayURL(a[b])){e=b;break}a[e].url&&(a[e]=a[e].url),d=a[e]}else d=a;return d},W=function(a){a._hasTimer||(a._hasTimer=!0,!ab&&ra.html5PollingInterval&&(null===Pa&&0===Oa&&(Pa=setInterval(Y,ra.html5PollingInterval)),Oa++))},X=function(a){a._hasTimer&&(a._hasTimer=!1,!ab&&ra.html5PollingInterval&&Oa--)},Y=function(){var a;if(null!==Pa&&!Oa)return clearInterval(Pa),Pa=null,!1;for(a=ra.soundIDs.length-1;a>=0;a--)ra.sounds[ra.soundIDs[a]].isHTML5&&ra.sounds[ra.soundIDs[a]]._hasTimer&&ra.sounds[ra.soundIDs[a]]._onTimer()},H=function(c){c=c!==b?c:{},"function"==typeof ra.onerror&&ra.onerror.apply(a,[{type:c.type!==b?c.type:null}]),c.fatal!==b&&c.fatal&&ra.disable()},la=function(){if(!bb||!ka())return!1;var a,b,c=ra.audioFormats;for(b in c)if(c.hasOwnProperty(b)&&("mp3"===b||"mp4"===b)&&(ra._wD(ua+": Using flash fallback for "+b+" format"),ra.html5[b]=!1,c[b]&&c[b].related))for(a=c[b].related.length-1;a>=0;a--)ra.html5[c[b].related[a]]=!1},this._setSandboxType=function(a){var c=ra.sandbox;c.type=a,c.description=c.types[c.types[a]!==b?a:"unknown"],"localWithFile"===c.type?(c.noRemote=!0,c.noLocal=!1,n("secNote",2)):"localWithNetwork"===c.type?(c.noRemote=!1,c.noLocal=!0):"localTrusted"===c.type&&(c.noRemote=!1,c.noLocal=!1)},this._externalInterfaceOK=function(a){if(ra.swfLoaded)return!1;var b;return m("swf",!0),m("flashtojs",!0),ra.swfLoaded=!0,eb=!1,bb&&la(),a&&a.replace(/\+dev/i,"")===ra.versionNumber.replace(/\+dev/i,"")?void setTimeout(k,Ya?100:1):(b=ua+': Fatal: JavaScript file build "'+ra.versionNumber+'" does not match Flash SWF build "'+a+'" at '+ra.url+". Ensure both are up-to-date.",setTimeout(function(){throw new Error(b)},0),!1)},G=function(a,c){function d(){var a,b=[],c=[],d=" + ";a="SoundManager "+ra.version+(!ra.html5Only&&ra.useHTML5Audio?ra.hasHTML5?" + HTML5 audio":", no HTML5 audio support":""),ra.html5Only?ra.html5PollingInterval&&b.push("html5PollingInterval ("+ra.html5PollingInterval+"ms)"):(ra.preferFlash&&b.push("preferFlash"),ra.useHighPerformance&&b.push("useHighPerformance"),ra.flashPollingInterval&&b.push("flashPollingInterval ("+ra.flashPollingInterval+"ms)"),ra.html5PollingInterval&&b.push("html5PollingInterval ("+ra.html5PollingInterval+"ms)"),ra.wmode&&b.push("wmode ("+ra.wmode+")"),ra.debugFlash&&b.push("debugFlash"),ra.useFlashBlock&&b.push("flashBlock")),b.length&&(c=c.concat([b.join(d)])),ra._wD(a+(c.length?d+c.join(", "):""),1),na()}function e(a,b){return'<param name="'+a+'" value="'+b+'" />'}if(Ca&&Da)return!1;if(ra.html5Only)return y(),d(),ra.oMC=h(ra.movieID),k(),Ca=!0,Da=!0,!1;var f,g,i,j,l,m,n,o,p=c||ra.url,q=ra.altURL||p,r="JS/Flash audio component (SoundManager 2)",s=F(),t=P(),u=null,v=za.getElementsByTagName("html")[0];if(u=v&&v.dir&&v.dir.match(/rtl/i),a=a===b?ra.id:a,y(),ra.url=M(jb?p:q),c=ra.url,ra.wmode=!ra.wmode&&ra.useHighPerformance?"transparent":ra.wmode,null!==ra.wmode&&(xa.match(/msie 8/i)||!Ya&&!ra.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(Qa.push(A.spcWmode),ra.wmode=null),f={name:a,id:a,src:c,quality:"high",allowScriptAccess:ra.allowScriptAccess,bgcolor:ra.bgColor,pluginspage:kb+"www.macromedia.com/go/getflashplayer",title:r,type:"application/x-shockwave-flash",wmode:ra.wmode,hasPriority:"true"},ra.debugFlash&&(f.FlashVars="debug=1"),ra.wmode||delete f.wmode,Ya)g=za.createElement("div"),j=['<object id="'+a+'" data="'+c+'" type="'+f.type+'" title="'+f.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',e("movie",c),e("AllowScriptAccess",ra.allowScriptAccess),e("quality",f.quality),ra.wmode?e("wmode",ra.wmode):"",e("bgcolor",ra.bgColor),e("hasPriority","true"),ra.debugFlash?e("FlashVars",f.FlashVars):"","</object>"].join("");else{g=za.createElement("embed");for(i in f)f.hasOwnProperty(i)&&g.setAttribute(i,f[i])}if(J(),t=P(),s=F())if(ra.oMC=h(ra.movieID)||za.createElement("div"),ra.oMC.id)o=ra.oMC.className,ra.oMC.className=(o?o+" ":Q.swfDefault)+(t?" "+t:""),ra.oMC.appendChild(g),Ya&&(l=ra.oMC.appendChild(za.createElement("div")),l.className=Q.swfBox,l.innerHTML=j),Da=!0;else{if(ra.oMC.id=ra.movieID,ra.oMC.className=Q.swfDefault+" "+t,m=null,l=null,ra.useFlashBlock||(ra.useHighPerformance?m={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(m={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},u&&(m.left=Math.abs(parseInt(m.left,10))+"px"))),Za&&(ra.oMC.style.zIndex=1e4),!ra.debugFlash)for(n in m)m.hasOwnProperty(n)&&(ra.oMC.style[n]=m[n]);try{Ya||ra.oMC.appendChild(g),s.appendChild(ra.oMC),Ya&&(l=ra.oMC.appendChild(za.createElement("div")),l.className=Q.swfBox,l.innerHTML=j),Da=!0}catch(a){throw new Error(N("domError")+" \n"+a.toString())}}return Ca=!0,d(),!0},B=function(){return ra.html5Only?(G(),!1):!ta&&(ra.url?(ta=ra.getMovie(ra.id),ta||(Ka?(Ya?ra.oMC.innerHTML=La:ra.oMC.appendChild(Ka),Ka=null,Ca=!0):G(ra.id,ra.url),ta=ra.getMovie(ra.id)),"function"==typeof ra.oninitmovie&&setTimeout(ra.oninitmovie,1),oa(),!0):(n("noURL"),!1))},v=function(){setTimeout(w,1e3)},x=function(){a.setTimeout(function(){U(va+"useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false..."),ra.setup({preferFlash:!1}).reboot(),ra.didFlashBlock=!0,ra.beginDelayedInit()},1)},w=function(){var b,c=!1;return!!ra.url&&(!Ma&&(Ma=!0,ha.remove(a,"load",v),ja&&eb&&!db?(n("waitFocus"),!1):(Ea||(b=ra.getMoviePercent(),b>0&&b<100&&(c=!0)),void setTimeout(function(){return b=ra.getMoviePercent(),c?(Ma=!1,ra._wD(N("waitSWF")),a.setTimeout(v,1),!1):(Ea||(ra._wD(ua+": No Flash response within expected time. Likely causes: "+(0===b?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(ra.debugFlash?" "+N("checkSWF"):""),2),!jb&&b&&(n("localFail",2),ra.debugFlash||n("tryDebug",2)),0===b&&ra._wD(N("swf404",ra.url),1),m("flashtojs",!1,": Timed out"+(jb?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)"))),void(!Ea&&fb&&(null===b?ra.useFlashBlock||0===ra.flashLoadTimeout?(ra.useFlashBlock&&O(),n("waitForever")):!ra.useFlashBlock&&$?x():(n("waitForever"),t({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}})):0===ra.flashLoadTimeout?n("waitForever"):!ra.useFlashBlock&&$?x():L(!0))))},ra.flashLoadTimeout))))},z=function(){function b(){ha.remove(a,"focus",z)}return db||!eb?(b(),!0):(fb=!0,db=!0,n("gotFocus"),Ma=!1,v(),b(),!0)},oa=function(){Qa.length&&(ra._wD("SoundManager 2: "+Qa.join(" "),1),Qa=[])},na=function(){oa();var a,b=[];if(ra.useHTML5Audio&&ra.hasHTML5){for(a in ra.audioFormats)ra.audioFormats.hasOwnProperty(a)&&b.push(a+" = "+ra.html5[a]+(!ra.html5[a]&&Ra&&ra.flash[a]?" (using flash)":ra.preferFlash&&ra.flash[a]&&Ra?" (preferring flash)":ra.html5[a]?"":" ("+(ra.audioFormats[a].required?"required, ":"")+"and no flash support)"));ra._wD("SoundManager 2 HTML5 support: "+b.join(", "),1)}},o=function(b){if(Ea)return!1;if(ra.html5Only)return n("sm2Loaded",1),Ea=!0,u(),m("onload",!0),!0;var c,d=ra.useFlashBlock&&ra.flashLoadTimeout&&!ra.getMoviePercent(),e=!0;return d||(Ea=!0),c={type:!ja&&Ra?"NO_FLASH":"INIT_TIMEOUT"},ra._wD("SoundManager 2 "+(Fa?"failed to load":"loaded")+" ("+(Fa?"Flash security/load error":"OK")+") "+String.fromCharCode(Fa?10006:10003),Fa?2:1),Fa||b?(ra.useFlashBlock&&ra.oMC&&(ra.oMC.className=P()+" "+(null===ra.getMoviePercent()?Q.swfTimedout:Q.swfError)),t({type:"ontimeout",error:c,ignoreInit:!0}),m("onload",!1),H(c),e=!1):m("onload",!0),Fa||(ra.waitForWindowLoad&&!Ga?(n("waitOnload"),ha.add(a,"load",u)):(ra.waitForWindowLoad&&Ga&&n("docLoaded"),u())),e},j=function(){var a,c=ra.setupOptions;for(a in c)c.hasOwnProperty(a)&&(ra[a]===b?ra[a]=c[a]:ra[a]!==c[a]&&(ra.setupOptions[a]=ra[a]))},k=function(){function b(){ha.remove(a,"load",ra.beginDelayedInit)}if(Ea)return n("didInit"),!1;if(ra.html5Only)return Ea||(b(),ra.enabled=!0,o()),!0;B();try{ta._externalInterfaceTest(!1),I(!0,ra.flashPollingInterval||(ra.useHighPerformance?10:50)),ra.debugMode||ta._disableDebug(),ra.enabled=!0,m("jstoflash",!0),ra.html5Only||ha.add(a,"unload",i)}catch(a){return ra._wD("js/flash exception: "+a.toString()),m("jstoflash",!1),H({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),L(!0),o(),!1}return o(),b(),!0},C=function(){return!E&&(E=!0,j(),J(),!ja&&ra.hasHTML5&&(ra._wD("SoundManager 2: No Flash detected"+(ra.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5."),1),ra.setup({useHTML5Audio:!0,preferFlash:!1})),ga(),!ja&&Ra&&(Qa.push(A.needFlash),ra.setup({flashLoadTimeout:1})),za.removeEventListener&&za.removeEventListener("DOMContentLoaded",C,!1),B(),!0)},fa=function(){return"complete"===za.readyState&&(C(),za.detachEvent("onreadystatechange",fa)),!0},D=function(){Ga=!0,C(),ha.remove(a,"load",D)},ka(),ha.add(a,"focus",z),ha.add(a,"load",v),ha.add(a,"load",D),za.addEventListener?za.addEventListener("DOMContentLoaded",C,!1):za.attachEvent?za.attachEvent("onreadystatechange",fa):(m("onload",!1),H({type:"NO_DOM2_EVENTS",fatal:!0}))}if(!a||!a.document)throw new Error("SoundManager requires a browser with window and document objects.");var d=null;a.SM2_DEFER!==b&&SM2_DEFER||(d=new c),"object"==typeof module&&module&&"object"==typeof module.exports?(module.exports.SoundManager=c,module.exports.soundManager=d):"function"==typeof define&&define.amd&&define(function(){function b(b){if(!a.soundManager&&b instanceof Function){var d=b(c);d instanceof c&&(a.soundManager=d)}return a.soundManager}return{constructor:c,getInstance:b}}),a.SoundManager=c,a.soundManager=d}(window);var ngSoundManager=angular.module("angularSoundManager",[]).config(["$logProvider",function(a){a.debugEnabled(!1)}]);ngSoundManager.filter("humanTime",function(){return function(a){function b(a){return a<10?"0"+a.toString():a.toString()}var c=a/1e3/60<<0,d=Math.round(a/1e3%60);return b(c)+":"+b(d)}}),ngSoundManager.factory("angularPlayer",["$rootScope","$log",function(a,b){var c=null,d=!1,e=!0,f=!1,g=90,h=0,i=[];return{init:function(){"undefined"==typeof soundManager&&alert("Please include SoundManager2 Library!"),soundManager.setup({preferFlash:!1,debugMode:!1,useHTML5Audio:!0,onready:function(){},ontimeout:function(){alert("SM2 failed to start. Flash missing, blocked or security error?"),alert("The status is "+status.success+", the error type is "+status.error.type)},defaultOptions:{autoLoad:!1,autoPlay:!1,from:null,loops:1,multiShot:!1,multiShotEvents:!1,onid3:null,onload:null,onstop:null,onfailure:"nextTrack",onpause:null,onplay:null,onresume:null,position:null,pan:0,stream:!0,to:null,type:"audio/mp3",usePolicyFile:!1,volume:g,whileloading:function(){var b=this.bytesLoaded/this.bytesTotal*100;a.$broadcast("track:loaded",b)},whileplaying:function(){c=this.id,h=this.position/this.duration*100,a.$broadcast("track:progress",h),a.$broadcast("currentTrack:position",this.position),a.$broadcast("currentTrack:duration",this.duration)},onfinish:function(){if(soundManager._writeDebug(this.id+" finished playing"),e===!0){var b=angular.element(document.querySelector("[ng-app]")),d=b.injector(),f=d.get("angularPlayer");f.nextTrack(),a.$broadcast("track:id",c)}}}}),soundManager.onready(function(){b.debug("song manager ready!");var c=soundManager.ok();b.debug("is supported: "+c),a.$broadcast("angularPlayer:ready",!0)})},isInArray:function(a,b){for(var c=0;c<a.length;c++)if(a[c].id===b)return c;return!1},getIndexByValue:function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;return!1},asyncLoop:function(a){var b=-1,c=function(){return b++,b==a.length?void a.callback():void a.functionToLoop(c,b)};c()},setCurrentTrack:function(a){c=a},getCurrentTrack:function(){return c},currentTrackData:function(){var a=this.getCurrentTrack(),b=this.isInArray(i,a);return i[b]},getPlaylist:function(a){return"undefined"==typeof a?i:i[a]},addToPlaylist:function(b){i.push(b),a.$broadcast("player:playlist",i)},isTrackValid:function(a){if("undefined"==typeof a)return b.debug("invalid track data"),!1;if(a.url.indexOf("soundcloud")>-1){if("undefined"==typeof a.url)return b.debug("invalid soundcloud track url"),!1}else if(soundManager.canPlayURL(a.url)!==!0)return b.debug("invalid song url"),!1},addTrack:function(a){if(!this.isTrackValid)return null;var b=this.isInArray(this.getPlaylist(),a.id);return b===!1&&(soundManager.createSound({id:a.id,url:a.url}),this.addToPlaylist(a)),a.id},removeSong:function(b,d){b===c&&this.stop(),soundManager.destroySound(b),i.splice(d,1),a.$broadcast("player:playlist",i)},initPlayTrack:function(b,c){c!==!0&&(this.stop(),this.setCurrentTrack(b)),soundManager.play(b),a.$broadcast("track:id",b),f=!0,a.$broadcast("music:isPlaying",f)},play:function(){var a=null;if(null===this.getCurrentTrack()){if(0===soundManager.soundIDs.length)return void b.debug("playlist is empty!");a=soundManager.soundIDs[0],this.initPlayTrack(a)}else a=this.getCurrentTrack(),this.initPlayTrack(a,!0)},pause:function(){soundManager.pause(this.getCurrentTrack()),f=!1,a.$broadcast("music:isPlaying",f)},stop:function(){this.pause(),this.resetProgress(),a.$broadcast("track:progress",h),a.$broadcast("currentTrack:position",0),a.$broadcast("currentTrack:duration",0),soundManager.stopAll(),soundManager.unload(this.getCurrentTrack())},playTrack:function(a){this.initPlayTrack(a)},nextTrack:function(){if(null===this.getCurrentTrack())return b.debug("Please click on Play before this action"),null;var c=this.getIndexByValue(soundManager.soundIDs,this.getCurrentTrack()),e=+c+1,g=soundManager.soundIDs[e];"undefined"!=typeof g?this.playTrack(g):d===!0?this.playTrack(soundManager.soundIDs[0]):(f=!1,a.$broadcast("music:isPlaying",f))},prevTrack:function(){if(null===this.getCurrentTrack())return b.debug("Please click on Play before this action"),null;var a=this.getIndexByValue(soundManager.soundIDs,this.getCurrentTrack()),c=+a-1,d=soundManager.soundIDs[c];"undefined"!=typeof d?this.playTrack(d):b.debug("no prev track found!")},mute:function(){soundManager.muted===!0?soundManager.unmute():soundManager.mute(),a.$broadcast("music:mute",soundManager.muted)},getMuteStatus:function(){return soundManager.muted},repeatToggle:function(){d=d!==!0,a.$broadcast("music:repeat",d)},getRepeatStatus:function(){return d},getVolume:function(){return g},adjustVolume:function(b){var c=function(b){for(var c=0;c<soundManager.soundIDs.length;c++){var d=soundManager.getSoundById(soundManager.soundIDs[c]);d.setVolume(b)}a.$broadcast("music:volume",b)};b===!0?g<100&&(g+=10,c(g)):g>0&&(g-=10,c(g))},adjustVolumeSlider:function(b){var c=function(b){for(var c=0;c<soundManager.soundIDs.length;c++){var d=soundManager.getSoundById(soundManager.soundIDs[c]);d.setVolume(b)}a.$broadcast("music:volume",b)};c(b)},clearPlaylist:function(c){b.debug("clear playlist"),this.resetProgress();var d=soundManager.soundIDs.length;this.asyncLoop({length:d,functionToLoop:function(a,b){setTimeout(function(){soundManager.destroySound(soundManager.soundIDs[0]),a()},100)},callback:function(){b.debug("All done!"),i=[],a.$broadcast("player:playlist",i),c(!0)}})},resetProgress:function(){h=0},isPlayingStatus:function(){return f}}}]),ngSoundManager.directive("soundManager",["$filter","angularPlayer",function(a,b){return{restrict:"E",link:function(c,d,e){b.init(),c.$on("track:progress",function(a,b){c.$apply(function(){c.progress=b})}),c.$on("track:id",function(a,d){c.$apply(function(){c.currentPlaying=b.currentTrackData()})}),c.$on("currentTrack:position",function(b,d){c.$apply(function(){c.currentPostion=a("humanTime")(d)})}),c.$on("currentTrack:duration",function(b,d){c.$apply(function(){c.currentDuration=a("humanTime")(d)})}),c.isPlaying=!1,c.$on("music:isPlaying",function(a,b){c.$apply(function(){c.isPlaying=b})}),c.playlist=b.getPlaylist(),c.$on("player:playlist",function(a,b){c.$apply(function(){c.playlist=b})})}}}]),ngSoundManager.directive("musicPlayer",["angularPlayer","$log",function(a,b){return{restrict:"EA",scope:{song:"=addSong"},link:function(c,d,e){var f=function(){var b=a.addTrack(c.song);"play"===e.musicPlayer&&a.playTrack(b)};d.bind("click",function(){b.debug("adding song to playlist"),f()})}}}]),ngSoundManager.directive("playFromPlaylist",["angularPlayer",function(a){return{restrict:"EA",scope:{song:"=playFromPlaylist"},link:function(b,c,d){c.bind("click",function(c){a.playTrack(b.song.id)})}}}]),ngSoundManager.directive("removeFromPlaylist",["angularPlayer",function(a){return{restrict:"EA",scope:{song:"=removeFromPlaylist"},link:function(b,c,d){c.bind("click",function(c){a.removeSong(b.song.id,d.index)})}}}]),ngSoundManager.directive("seekTrack",["angularPlayer","$log",function(a,b){return{restrict:"EA",link:function(c,d,e){d.bind("click",function(c){if(null===a.getCurrentTrack())return void b.debug("no track loaded");var e=soundManager.getSoundById(a.getCurrentTrack()),f=function(a){for(var b=0,c=a.target;c&&!isNaN(c.offsetLeft)&&!isNaN(c.offsetTop);)b+=c.offsetLeft-c.scrollLeft,c=c.offsetParent;return a.clientX-b},g=c.offsetX||f(c),h=d[0].clientWidth,i=e.durationEstimate;e.setPosition(g/h*i)})}}}]),ngSoundManager.directive("playMusic",["angularPlayer",function(a){return{restrict:"EA",link:function(b,c,d){c.bind("click",function(b){a.play()})}}}]),ngSoundManager.directive("pauseMusic",["angularPlayer",function(a){return{restrict:"EA",link:function(b,c,d){c.bind("click",function(b){a.pause()})}}}]),ngSoundManager.directive("stopMusic",["angularPlayer",function(a){return{restrict:"EA",link:function(b,c,d){c.bind("click",function(b){a.stop()})}}}]),ngSoundManager.directive("nextTrack",["angularPlayer",function(a){return{restrict:"EA",link:function(b,c,d){c.bind("click",function(b){a.nextTrack()})}}}]),ngSoundManager.directive("prevTrack",["angularPlayer",function(a){return{restrict:"EA",link:function(b,c,d){c.bind("click",function(b){a.prevTrack()})}}}]),ngSoundManager.directive("muteMusic",["angularPlayer",function(a){return{restrict:"EA",link:function(b,c,d){c.bind("click",function(b){a.mute()}),b.mute=a.getMuteStatus(),b.$on("music:mute",function(a,c){b.$apply(function(){b.mute=c})})}}}]),ngSoundManager.directive("repeatMusic",["angularPlayer",function(a){return{restrict:"EA",link:function(b,c,d){c.bind("click",function(b){a.repeatToggle()}),b.repeat=a.getRepeatStatus(),b.$on("music:repeat",function(a,c){b.$apply(function(){b.repeat=c})})}}}]),ngSoundManager.directive("musicVolume",["angularPlayer",function(a){return{restrict:"EA",link:function(b,c,d){c.bind("click",function(b){"increase"===d.type?a.adjustVolume(!0):a.adjustVolume(!1)}),b.volume=a.getVolume(),b.$on("music:volume",function(a,c){b.$apply(function(){b.volume=c})})}}}]),ngSoundManager.directive("clearPlaylist",["angularPlayer","$log",function(a,b){return{restrict:"EA",link:function(c,d,e){d.bind("click",function(c){a.stop(),a.setCurrentTrack(null),a.clearPlaylist(function(a){b.debug("all clear!")})})}}}]),ngSoundManager.directive("playAll",["angularPlayer","$log",function(a,b){return{restrict:"EA",scope:{songs:"=playAll"},link:function(c,d,e){d.bind("click",function(d){a.clearPlaylist(function(d){b.debug("cleared, ok now add to playlist");for(var f=0;f<c.songs.length;f++)a.addTrack(c.songs[f]);"false"!=e.play&&a.play()})})}}}]),ngSoundManager.directive("volumeBar",["angularPlayer",function(a){return{restrict:"EA",link:function(b,c,d){c.bind("click",function(b){var d=function(a){for(var b=0,c=a.target;c&&!isNaN(c.offsetLeft)&&!isNaN(c.offsetTop);)b+=c.offsetLeft-c.scrollLeft,c=c.offsetParent;return a.clientX-b},e=b.offsetX||d(b),f=c[0].clientWidth,g=100,h=e/f*g;a.adjustVolumeSlider(h)}),b.volume=a.getVolume(),b.$on("music:volume",function(a,c){b.$apply(function(){b.volume=c})})}}}]),ngSoundManager.directive("playPauseToggle",["angularPlayer",function(a){return{restrict:"EA",link:function(b,c,d){b.$on("music:isPlaying",function(a,b){b?"undefined"!=typeof d.pause?c.html(d.pause):c.html("Pause"):"undefined"!=typeof d.play?c.html(d.play):c.html("Play")}),c.bind("click",function(b){a.isPlayingStatus()?a.pause():a.play()})}}}]);